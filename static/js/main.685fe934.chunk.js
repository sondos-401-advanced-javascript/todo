(this["webpackJsonpdemo-context-api"]=this["webpackJsonpdemo-context-api"]||[]).push([[0],{168:function(e,t,n){e.exports=n(320)},197:function(e,t){},199:function(e,t){},213:function(e,t){},215:function(e,t){},243:function(e,t){},245:function(e,t){},246:function(e,t){},251:function(e,t){},253:function(e,t){},260:function(e,t){},262:function(e,t){},280:function(e,t){},283:function(e,t){},299:function(e,t){},302:function(e,t){},320:function(e,t,n){"use strict";n.r(t);var a=n(21),r=n(22),o=n(24),c=n(23),l=n(0),i=n.n(l),u=n(41),s=n.n(u),m=n(324),p=n(322),d=n(9),f=n(10),h=n.n(f),g=n(25),b=n(50),v=n.n(b);var E=function(e){var t=Object(l.useState)([]),n=Object(d.a)(t,2),a=n[0],r=n[1],o=function(){var e=Object(g.a)(h.a.mark((function e(t){var n,a,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.complete=!1,n={headers:{"Content-Type":"application/json"},mode:"cors"},"https://api401-todo.herokuapp.com/todo",a={item:t.item,difficulty:t.difficulty,complete:t.complete,assignee:t.assignee},e.next=6,v.a.post("https://api401-todo.herokuapp.com/todo",a,n);case 6:return e.next=8,u();case 8:o=e.sent,r([o]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(g.a)(h.a.mark((function e(t,n){var a,o,c,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"},mode:"cors"},o="https://api401-todo.herokuapp.com/todo/".concat(n),c={item:t.item,difficulty:t.difficulty,complete:!t.complete,assignee:t.assignee},e.next=5,v.a.put(o,c,a);case 5:return e.next=7,u();case 7:l=e.sent,r([l]);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i=function(){var e=Object(g.a)(h.a.mark((function e(t){var n,a,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"},mode:"cors"},a="https://api401-todo.herokuapp.com/todo/".concat(t),e.next=4,v.a.delete(a,n);case 4:return e.next=6,u();case 6:o=e.sent,r([o]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var t=Object(g.a)(h.a.mark((function t(){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{"Content-Type":"application/json"},mode:"cors"},"https://api401-todo.herokuapp.com/todo",t.next=4,v.a.get("https://api401-todo.herokuapp.com/todo",n);case 4:a=t.sent,e(a.data);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return[o,c,i,u,a]},j=i.a.createContext();var y=function(e){var t=Object(l.useState)([]),n=Object(d.a)(t,2),a=n[0],r=n[1],o=Object(l.useState)("Go to All"),c=Object(d.a)(o,2),u=c[0],s=c[1],m=Object(l.useState)(0),p=Object(d.a)(m,2),f=p[0],h=p[1],g=Object(l.useState)(0),b=Object(d.a)(g,2),v=b[0],y=b[1],O=E((function(e){r(e)})),k=Object(d.a)(O,4),C=k[0],x=k[1],w=k[2],S=k[3];Object(l.useEffect)((function(){S()}),[a]);var T={list:a,add:C,update:x,delete:w,funList:r,toggle:u,funToggle:s,buttons:f,funButton:h,count:v,funCount:y};return i.a.createElement(j.Provider,{value:T},e.children)};n(98);var O=function(){var e=Object(l.useContext)(j),t=Object(l.useState)(0),n=Object(d.a)(t,2),a=n[0],r=n[1];return Object(l.useEffect)((function(){r(e.list.filter((function(e){return!e.complete})).length),document.title="There are ".concat(a," Items To Complete")}),[a,e.list]),i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,null,i.a.createElement(m.a,{bg:"dark",variant:"dark",style:{marginTop:"2em"}},i.a.createElement(m.a.Brand,null,"There are ",a," Items To Complete"))))},k=(n(192),n(327)),C=n(326),x=n(166),w=n(325),S=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?t:null},T=function(e){return i.a.Children.map(e.children,(function(t){return i.a.cloneElement(t,{condition:e.condition})}))},N=function(e){return S(e.condition,e.children)},I=function(e){return S(!e.condition,e.children)},A=n(88),B=n.n(A),L=n(161),D=n.n(L),G="https://api401-todo.herokuapp.com",P=i.a.createContext(),F=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).login=function(){var e=Object(g.a)(h.a.mark((function e(t,n){var a,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(G,"/signin"),{method:"POST",mode:"cors",cache:"no-cache",headers:new Headers({Authorization:"Basic ".concat(btoa("".concat(t,":").concat(n)))})});case 3:return a=e.sent,e.next=6,a.json();case 6:o=e.sent,r.validateToken(o.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("there is an error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),r.signup=function(){var e=Object(g.a)(h.a.mark((function e(t,n,a){var o,c,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={username:t,password:n,role:a},e.prev=1,e.next=4,fetch("".concat(G,"/signup"),{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(o)});case 4:return c=e.sent,e.next=7,c.json();case 7:l=e.sent,r.validateToken(l.token),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("there is an error",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n,a){return e.apply(this,arguments)}}(),r.logout=function(){r.setLoginState(!1,null,{})},r.validateToken=function(e){try{var t=D.a.verify(e,"homesweet");r.setLoginState(!0,e,t)}catch(n){r.logout(),console.log("validate token error")}},r.setLoginState=function(e,t,n){B.a.save("token",t),r.setState({token:t,loggedIn:e,user:n})},r.state={loggedIn:!1,login:r.login,signup:r.signup,logout:r.logout,user:{}},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=B.a.load("token")||null;this.validateToken(e)}},{key:"render",value:function(){return i.a.createElement(P.Provider,{value:this.state},this.props.children)}}]),n}(i.a.Component),U=function(e){return e.condition?e.children:null},J=function(e){return e.condition?e.children:null},_=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=!1;try{e=this.context.loggedIn&&(!this.props.capability||this.context.user.capability.includes(this.props.capability))}catch(t){console.warn("Not Authorized!")}return i.a.createElement(U,{condition:e},this.props.children)}}]),n}(i.a.Component);_.contextType=P;var z=_;var H=function(){var e=Object(l.useContext)(j),t=e.list.sort((function(e,t){return e.difficulty-t.difficulty})),n=e.list.filter((function(e){return!1===e.complete}));n.sort((function(e,t){return e.difficulty-t.difficulty}));var a=function(t){for(var n=[],a=function(t){n.push(i.a.createElement(k.a,{key:t,onClick:function(){return e.funButton(t)}},t+1))},r=0;r<t;r++)a(r);return n},r=function(t){return t.map((function(t){var n,a;return n=t.complete?"danger":"success",a=t.complete?"Complete":"Pending",i.a.createElement(C.a,{key:t._id},i.a.createElement(x.a,{closeButton:!1},i.a.createElement(F,null,i.a.createElement(z,{capability:"update"},i.a.createElement(k.a,{className:"complete",onClick:function(){return e.update(t,t._id)},variant:"".concat(n)},a)," ")),i.a.createElement("strong",{className:"mr-auto assign"},t.assignee),i.a.createElement(F,null,i.a.createElement(z,{capability:"delete"},i.a.createElement(k.a,{className:"closedel",variant:"outline-dark",onClick:function(){return e.delete(t._id)}},"X")))),i.a.createElement(C.a.Body,{className:"assign"},t.item),i.a.createElement("small",{className:"difficult"},"Difficulty: ",t.difficulty))}))},o=function(t){if(t.length>3){var n=new Array(Math.ceil(t.length/3)).fill().map((function(){return t.splice(0,3)}));return[r(n[e.buttons]),a(n.length)]}return[r(t),a(0)]};return i.a.createElement(i.a.Fragment,null,i.a.createElement(T,{condition:"Go to All"===e.toggle},i.a.createElement(N,null,i.a.createElement(w.a,{className:"float-right"},o(n))),i.a.createElement(I,null,i.a.createElement(w.a,{className:"float-right"},o(t)))),i.a.createElement(k.a,{className:"filter-bt",onClick:function(){"Go to All"===e.toggle?e.funToggle("Go Incomplete"):e.funToggle("Go to All")}},e.toggle))},M=n(42),R=n(323),V=n(38);var X=function(e){var t=Object(l.useState)({}),n=Object(d.a)(t,2),a=n[0],r=n[1];return[function(t){t.preventDefault(),a.complete=!1,e(a)},function(e){e.persist(),r(Object(M.a)(Object(M.a)({},a),{},Object(V.a)({},e.target.name,e.target.value)))},a]};var q=function(e){var t=Object(l.useState)({}),n=Object(d.a)(t,2),a=n[0],r=n[1],o=X((function(e){m.add(e),r(Object(M.a)(Object(M.a)({},a),{},{obj:e}))})),c=Object(d.a)(o,2),u=c[0],s=c[1],m=Object(l.useContext)(j);return i.a.createElement(i.a.Fragment,null,i.a.createElement(R.a,{onSubmit:u,className:"float-left"},i.a.createElement(R.a.Group,{controlId:"formBasicEmail"},i.a.createElement("h3",null,"Add Item"),i.a.createElement(R.a.Label,null,"To Do Item"),i.a.createElement(R.a.Control,{type:"text",name:"item",placeholder:"Add To Do List Item",onChange:s})),i.a.createElement(R.a.Group,{controlId:"formBasicPassword"},i.a.createElement(R.a.Label,null,"Assigned To"),i.a.createElement(R.a.Control,{type:"text",name:"assignee",placeholder:"Assigned To",onChange:s})),i.a.createElement(R.a.Group,{controlId:"formBasicRange"},i.a.createElement(R.a.Label,null,"Range"),i.a.createElement(R.a.Control,{defaultValue:"1",type:"range",min:"1",max:"5",name:"difficulty",onChange:s})),i.a.createElement(k.a,{variant:"primary",type:"submit",style:{width:"50%"}},"Add Item")))},K=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).handleChange=function(e){r.setState(Object(V.a)({},e.target.name,e.target.value))},r.handleSubmit=function(e){e.preventDefault(),r.context.login(r.state.username,r.state.password)},r.handleSubmitSignUp=function(e){e.preventDefault(),r.context.signup(r.state.username,r.state.password,r.state.role)},r.handelClick=function(e){e.preventDefault(),r.setState({condition:!1})},r.state={username:"",password:"",role:"",condition:!0},r}return Object(r.a)(n,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(U,{condition:this.context.loggedIn},i.a.createElement("button",{onClick:this.context.logout,className:"log"},"Logout")),i.a.createElement(U,{condition:!this.context.loggedIn},i.a.createElement(J,{condition:this.state.condition},i.a.createElement("form",{onSubmit:this.handleSubmit,className:"log"},i.a.createElement("input",{placeholder:"userName",name:"username",onChange:this.handleChange}),i.a.createElement("input",{placeholder:"password",name:"password",onChange:this.handleChange}),i.a.createElement("button",null,"Login")),i.a.createElement("button",{onClick:this.handelClick,className:"logs"},"SignUp")),i.a.createElement(J,{condition:!this.state.condition},i.a.createElement("form",{onSubmit:this.handleSubmitSignUp,className:"log"},i.a.createElement("input",{placeholder:"userName",name:"username",onChange:this.handleChange}),i.a.createElement("input",{placeholder:"password",name:"password",onChange:this.handleChange}),i.a.createElement("input",{placeholder:"user,editor,admin",name:"role",onChange:this.handleChange}),i.a.createElement("button",null,"SignUp")))))}}]),n}(i.a.Component);K.contextType=P;var Q=K,W=function(){return Object(l.useContext)(y),i.a.createElement(i.a.Fragment,null,i.a.createElement("header",null,i.a.createElement(m.a,{bg:"primary",variant:"dark"},i.a.createElement(m.a.Brand,null,"Home"))),i.a.createElement("main",null,i.a.createElement(p.a,null,i.a.createElement(y,null,i.a.createElement(F,null,i.a.createElement(Q,null),i.a.createElement("div",{id:"flex"},i.a.createElement(z,{capability:"read"},i.a.createElement(O,null),i.a.createElement("section",{className:"todo"},i.a.createElement("div",{className:"list-group"},i.a.createElement(H,null)))),i.a.createElement(z,{capability:"update"},i.a.createElement("section",{className:"todo"},i.a.createElement("div",{className:"form-border"},i.a.createElement(q,null))))))))))},Y=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return i.a.createElement(W,null)}}]),n}(i.a.Component),Z=document.getElementById("root");s.a.render(i.a.createElement(Y,null),Z)},98:function(e,t,n){}},[[168,1,2]]]);
//# sourceMappingURL=main.685fe934.chunk.js.map